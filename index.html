<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>AR Business Card</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.loaders.min.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="debugUIEnabled: false; patternRatio: 0.75" renderer="logarithmicDepthBuffer: true">
        <a-marker preset="custom" type="pattern" url="marker/pattern-qr.patt" id="marker">
            <a-entity gltf-model="model/sci_fi_door.glb" scale="0.56 0.56 0.56" rotation="0 0 0"></a-entity>
            <!-- <a-sound id="backgroundSound" src="sound/herald.mp3" position="0 0 0" volume="0.5"></a-sound> -->
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            var marker = document.querySelector('#marker');
            // var sound = document.querySelector('#backgroundSound'); 

            marker.addEventListener('markerFound', () => {
                var model = marker.querySelector('[gltf-model]');
                model.setAttribute('animation-mixer', { clip: 'opening_door', loop: 'once', clampWhenFinished: true });
            });

            /*marker.addEventListener('markerFound', () => {
                sound.components.sound.playSound();
            });*/
        });
    </script>
</body>

</html>